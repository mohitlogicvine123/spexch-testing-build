import{G as Y,r as a,u as ee,a as J,j as e,I as W,b as B,c as A,Q as H,f as se,B as G,s as te,d as D,e as K,g as Q,h as re,F as _}from"./index-DjavT7Uf.js";function le(N){return Y({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M22 12C22 17.5228 17.5229 22 12 22C6.4772 22 2 17.5228 2 12C2 6.47715 6.4772 2 12 2V4C7.5817 4 4 7.58172 4 12C4 16.4183 7.5817 20 12 20C16.4183 20 20 16.4183 20 12C20 9.25022 18.6127 6.82447 16.4998 5.38451L16.5 8H14.5V2L20.5 2V4L18.0008 3.99989C20.4293 5.82434 22 8.72873 22 12Z"},child:[]}]})(N)}const oe=({closeModal:N})=>{var n;const[t,p]=a.useState({username:"",name:"",role:"",commission:"",openingBalance:"",creditReference:"",mobileNumber:"",partnership:"",password:"",confirmPassword:"",rollingCommission:{fancy:0,matka:0,casino:0,binary:0,sportbook:0,bookmaker:0},agentRollingCommission:{fancy:0,matka:0,casino:0,binary:0,sportbook:0,bookmaker:0},masterPassword:"",rollingCommissionChecked:!1,agentRollingCommissionChecked:!1}),[l,x]=a.useState({}),[v,P]=a.useState(!1),[C,R]=a.useState(""),[k,q]=a.useState(null),[y,$]=a.useState(null),{userData:c,loading:Z,error:O}=ee(s=>s.user),[E,L]=a.useState(!1),[F,U]=a.useState(!1),[M,r]=a.useState(!1),z=J();console.log("userData",(n=c==null?void 0:c.data)==null?void 0:n.role_name);const d=()=>t.username.trim()!==""&&t.name.trim()!==""&&t.role!==""&&t.commission>=0&&t.commission<=100&&t.partnership>=0&&t.partnership<=100&&t.password.trim()!==""&&t.password===t.confirmPassword&&t.masterPassword.trim()!==""&&(!t.rollingCommissionChecked||Object.values(t.rollingCommission).every(s=>s!==""))&&(!t.agentRollingCommissionChecked||Object.values(t.agentRollingCommission).every(s=>s!=="")),f=s=>{const{name:o,value:i,type:b,checked:u}=s.target;if(o==="username"){const m=i.replace(/[^a-zA-Z0-9]/g,"");console.log(m,"sanitizedValuesanitizedValue"),p(g=>({...g,[o]:m}));return}if(b==="checkbox")p(m=>({...m,[o]:u}));else if(o.includes("rollingCommission")||o.includes("agentRollingCommission")){const[m,g]=o.split(".");p(j=>({...j,[m]:{...j[m],[g]:i}}))}else p(m=>({...m,[o]:i}))},h=()=>{const s={};return t.username.trim()?t.username.length<4&&(s.username="Username must be at least 4 characters long."):s.username="Username is required.",t.name.trim()||(s.name="Name is required."),t.role||(s.role="Role selection is required."),(t.commission<0||t.commission>100)&&(s.commission="Commission must be between 0 and 100."),(t.partnership<0||t.partnership>100)&&(s.partnership="Partnership must be between 0 and 100."),t.password.trim()?/(?=.*[a-z])(?=.*[A-Z])/.test(t.password)||(s.password="Password must contain at least one uppercase and one lowercase letter."):s.password="Password is required.",t.password!==t.confirmPassword&&(s.confirmPassword="Passwords do not match."),t.masterPassword.trim()||(s.masterPassword="Master Password is required."),x(s),Object.keys(s).length===0};a.useEffect(()=>{const s=localStorage.getItem("authToken");s&&q(s)},[]),a.useEffect(()=>{k&&(async()=>{try{const o=await se(k);$(o||[])}catch{G.error("Failed to fetch roles.")}})()},[k]);const T=s=>{console.log("role id",s),p(o=>({...o,role:s}))},V=async s=>{var m,g,j,S;if(s.preventDefault(),!h())return;P(!0),R("");const{confirmPassword:o,rollingCommissionChecked:i,agentRollingCommissionChecked:b,...u}=t;try{const w=await te(`${D}/user/create-user`,u,k);(m=w==null?void 0:w.data)!=null&&m.success?(p({username:"",name:"",role:"",commission:10,openingBalance:0,creditReference:"",mobileNumber:"",partnership:0,password:"",confirmPassword:"",rollingCommission:{fancy:" ",matka:" ",casino:" ",binary:" ",bookmaker:" "},agentRollingCommission:{fancy:" ",matka:" ",casino:" ",binary:" ",sportsbook:" ",bookmaker:" "},masterPassword:""}),G.success(((g=w==null?void 0:w.data)==null?void 0:g.message)||"Master created Successfully"),I(),window.location.reload(),z(K())):G.error(((S=(j=w==null?void 0:w.response)==null?void 0:j.data)==null?void 0:S.message)||"Failed to save master.")}catch(w){G.error((w==null?void 0:w.message)||"An error occurred while saving the master.")}finally{P(!1)}},I=()=>{R(""),N()};return e.jsxs("div",{className:" bg-white rounded shadow-lg ",children:[e.jsxs("h2",{className:"flex text-white font-custom text-[15px] font-semibold mb-4 py-2 px-2 bg-gradient-blue",children:["Add Master",e.jsx(W,{onClick:N,className:"cursor-pointer text-white text-2xl ml-auto"})]}),e.jsx("form",{onSubmit:V,autoComplete:"off",className:"md:px-6 px-4",children:e.jsxs("div",{className:"flex flex-col gap-2.5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"username",placeholder:"Username..",autoComplete:"username",value:t.username,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),t.username.length>0&&t.username.length<4&&e.jsx("div",{className:"text-red-500 text-sm",children:"Username must be at least 4 characters long."}),l.username&&e.jsx("div",{className:"text-red-500 text-sm",children:l.username})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Name"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"name",autoComplete:"name",placeholder:"Name..",value:t.name,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),l.name&&e.jsx("div",{className:"text-red-500 text-sm",children:l.name})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Account Type ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("select",{name:"role",value:t.role||"",onChange:s=>{f(s),T(s.target.value)},className:"w-full h-8 p-1 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",children:[e.jsx("option",{value:"",disabled:!0,children:"Select your A/C. type"}),y==null?void 0:y.filter(({role_name:s})=>{var o,i,b,u,m;return((o=c==null?void 0:c.data)==null?void 0:o.role_name)==="super-admin"?s==="sub-admin":((i=c==null?void 0:c.data)==null?void 0:i.role_name)==="sub-admin"?s==="white-level":((b=c==null?void 0:c.data)==null?void 0:b.role_name)==="white-level"?s==="super"||s==="master"||s==="agent":((u=c==null?void 0:c.data)==null?void 0:u.role_name)==="super"?s==="master"||s==="agent":((m=c==null?void 0:c.data)==null?void 0:m.role_name)==="master"?s==="agent":!1}).map(({_id:s,role_name:o},i)=>e.jsx("option",{value:s,children:o},i))]}),l.role&&e.jsx("div",{className:"text-red-500 text-sm",children:l.role})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Commission (%) ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"commission",placeholder:"Commission..",value:t.commission,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),l.commission&&e.jsx("div",{className:"text-red-500 text-sm",children:l.commission})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Opening Balance ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"openingBalance",placeholder:"Opening Balance..",value:t.openingBalance,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),l.openingBalance&&e.jsx("div",{className:"text-red-500 text-sm",children:l.openingBalance})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Credit Reference ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"creditReference",placeholder:"Credit Reference..",value:t.creditReference,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),l.creditReference&&e.jsx("div",{className:"text-red-500 text-sm",children:l.creditReference})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Mobile Number ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"mobileNumber",placeholder:"Mobile Number..",value:t.mobileNumber,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),l.mobileNumber&&e.jsx("div",{className:"text-red-500 text-sm",children:l.mobileNumber})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Partnership ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"partnership",placeholder:"Partnership..",value:t.partnership,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),l.partnership&&e.jsx("div",{className:"text-red-500 text-sm",children:l.partnership})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:E?"text":"password",name:"password",autoComplete:"newpassword",placeholder:"Password..",value:t.password,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),e.jsx("button",{type:"button",className:"absolute right-2 top-2 text-gray-500",onClick:()=>L(!E),children:E?e.jsx(B,{size:20}):e.jsx(A,{size:20})}),l.password&&e.jsx("div",{className:"text-red-500 text-sm",children:l.password})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:" w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Confirm Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:F?"text":"password",placeholder:"Confirm Password..",name:"confirmPassword",value:t.confirmPassword,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),e.jsx("button",{type:"button",className:"absolute right-2 top-2 text-gray-500",onClick:()=>U(!F),children:F?e.jsx(B,{size:20}):e.jsx(A,{size:20})}),l.confirmPassword&&e.jsx("div",{className:"text-red-500 text-sm",children:l.confirmPassword})]})]}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Rolling Commission"}),e.jsxs("div",{className:`relative inline-flex items-center rounded-[4px] h-7 w-14 p-[2px] border border-whiteGray cursor-pointer transition-colors ${t.rollingCommissionChecked?"bg-gradient-seablue":"bg-white"}`,onClick:()=>{p({...t,rollingCommissionChecked:!t.rollingCommissionChecked})},children:[e.jsx("input",{type:"checkbox",name:"rollingCommissionChecked",checked:t.rollingCommissionChecked,onChange:f,className:"hidden"}),e.jsx("span",{className:`absolute right-2 text-sm font-bold ${t.rollingCommissionChecked?"text-transparent":"text-whiteGray"}`,children:"✗"}),e.jsx("span",{className:`absolute left-2 text-sm font-bold ${t.rollingCommissionChecked?"text-white":"text-transparent"}`,children:"✓"}),e.jsx("span",{className:`inline-block size-[21px] rounded-[2px] border border-whiteGray bg-white transform transition-transform ${t.rollingCommissionChecked?"translate-x-7":"translate-x-[1.5px]"}`})]})]}),t.rollingCommissionChecked&&e.jsx("div",{className:"flex flex-col gap-2.5",children:["fancy","matka","casino","binary","sportbook","bookmaker"].map(s=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:" w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:s}),e.jsx("div",{className:"relative flex-1",children:e.jsx("input",{type:"text",name:`rollingCommission.${s}`,value:t.rollingCommission[s]||"",onChange:f,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})})]},s))}),e.jsxs("div",{className:"flex flex-row items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Agent Rolling Commission"}),e.jsxs("div",{className:`relative inline-flex items-center rounded-[4px] h-7 w-14 p-[2px] border border-whiteGray cursor-pointer transition-colors ${t.agentRollingCommissionChecked?"bg-gradient-seablue":"bg-white"}`,onClick:()=>{p({...t,agentRollingCommissionChecked:!t.agentRollingCommissionChecked})},children:[e.jsx("input",{type:"checkbox",name:"agentRollingCommissionChecked",checked:t.agentRollingCommissionChecked,onChange:f,className:"hidden"}),e.jsx("span",{className:`absolute right-2 text-sm font-bold ${t.agentRollingCommissionChecked?"text-transparent":"text-whiteGray"}`,children:"✗"}),e.jsx("span",{className:`absolute left-2 text-sm font-bold ${t.agentRollingCommissionChecked?"text-white":"text-transparent"}`,children:"✓"}),e.jsx("span",{className:`inline-block size-[21px] rounded-[2px] border border-whiteGray bg-white transform transition-transform ${t.agentRollingCommissionChecked?"translate-x-7":"translate-x-[1.5px]"}`})]}),e.jsx("input",{type:"checkbox",name:"agentRollingCommissionChecked",checked:t.agentRollingCommissionChecked,onChange:f,className:"hidden"})]}),t.agentRollingCommissionChecked&&e.jsx("div",{className:"flex flex-col gap-2.5",children:["fancy","matka","casino","binary","sportbook","bookmaker"].map(s=>e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:s}),e.jsx("div",{className:"flex-1 relative",children:e.jsx("input",{type:"text",name:`agentRollingCommission.${s}`,value:t.agentRollingCommission[s]||"",onChange:f,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})})]},s))}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Master Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:M?"text":"password",placeholder:"Master Password..",name:"masterPassword",value:t.masterPassword,onChange:f,required:!0,className:"w-full h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"}),e.jsx("button",{type:"button",className:"absolute right-2 top-2 text-gray-500",onClick:()=>r(!M),children:M?e.jsx(B,{size:20}):e.jsx(A,{size:20})})]}),l.masterPassword&&e.jsx("div",{className:"text-red-500 text-sm",children:l.masterPassword})]}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{type:"submit",className:`px-6 py-2 text-white rounded mb-2 ${d()?"bg-gradient-seablue hover:bg-gradient-seablue":"bg-gray-400 cursor-not-allowed"}`,disabled:v||!d(),children:v?"Creating...":"Create"})})]})}),e.jsx(H,{autoClose:2e3,draggable:!0})]})},ae=async(N,t,p,l)=>{const x=await Q.post(N,t,{headers:{Authorization:`Bearer ${p}`,role:l}});return console.log("res",x),x.data.success===!0?(G.success(x.data.message||"Operation successful",{autoClose:2e3}),x):x.data.success===!1?(G.error(x.data.message||"Something went wrong",{autoClose:2e3}),x):(G.error("Unexpected error occurred.",{autoClose:2e3}),x)},ne=({closeModal:N})=>{const[t,p]=a.useState(!1),[l,x]=a.useState(null),[v,P]=a.useState(""),[C,R]=a.useState(null),[k,q]=a.useState(null),[y,$]=a.useState(!1),[c,Z]=a.useState(!1),[O,E]=a.useState(!1),[L,F]=a.useState(!1),U=J(),M={username:"",name:"",commission:"",openingBalance:"",creditReference:"",mobileNumber:"",exposureLimit:"",password:"",confirmPassword:"",rollingCommission:{fancy:"0",matka:"0",casino:"0",binary:"0",sportbook:"0",bookmaker:"0"},masterPassword:""},[r,z]=a.useState(M),[d,f]=a.useState({});a.useEffect(()=>{(()=>{const{username:s,name:o,commission:i,openingBalance:b,creditReference:u,mobileNumber:m,exposureLimit:g,password:j,confirmPassword:S,masterPassword:w}=r,X=s.length>=4&&o&&i&&b&&u&&m&&g&&j&&S&&w&&j===S&&i>=0&&i<=100&&b>=0&&u>=0&&g>=0;F(X)})()},[r]),a.useEffect(()=>{var s,o;const n=localStorage.getItem("authToken");if(n)try{const i=(o=(s=JSON.parse(n))==null?void 0:s.donation)==null?void 0:o.accessToken;R(i||n)}catch{R(n)}else x("Token is missing. Please login again.")},[]),a.useEffect(()=>{C&&(async()=>{try{const i=(await Q.get(`${D}/user/get-role`,{headers:{Authorization:`Bearer ${C}`}})).data.data.find(b=>b.role_name==="user");q((i==null?void 0:i._id)||null)}catch(s){x(s.message||"Failed to fetch roles.")}})()},[C]);const h=n=>{const{name:s,value:o,type:i,checked:b}=n.target;if(s==="username"){const u=o.replace(/[^a-zA-Z0-9]/g,"");console.log(u,"sanitizedValuesanitizedValue"),z(m=>({...m,[s]:u}));return}if(s==="rollingCommissionChecked")z(u=>({...u,rollingCommissionChecked:b}));else if(s.startsWith("rollingCommission")){const[u,m]=s.split(".");z(g=>({...g,[u]:{...g[u],[m]:i==="checkbox"?b:o?Number(o):0}}))}else z(u=>({...u,[s]:i==="checkbox"?b:o}))},T=()=>{let n={};return r.username?r.username.length<4&&(n.username="Username must be at least 4 characters long."):n.username="Username is required.",r.name||(n.name="Name is required."),(r.commission<0||r.commission>100)&&(n.commission="Commission must be between 0 and 100."),r.openingBalance<0&&(n.openingBalance="Opening balance must be a positive number."),r.creditReference<0&&(n.creditReference="Credit reference must be a positive number."),r.mobileNumber||(n.mobileNumber="Mobile number is required."),r.exposureLimit<0&&(n.exposureLimit="Exposure limit must be a positive number."),r.password?/(?=.*[a-z])(?=.*[A-Z])/.test(r.password)||(n.password="Password must contain at least one uppercase and one lowercase letter."):n.password="Password is required.",r.password!==r.confirmPassword&&(n.confirmPassword="Passwords must match."),r.masterPassword||(n.masterPassword="Master password is required."),n},V=async n=>{var m,g;n.preventDefault();const s=T();if(f(s),Object.keys(s).length>0)return;if(!C){x("Token is missing. Please login again.");return}if(!k){x("User role ID is not available. Please try again later.");return}p(!0),x(null),P("");const{confirmPassword:o,rollingCommissionChecked:i,...b}=r;i&&(b.rollingCommission=Object.fromEntries(Object.entries(b.rollingCommission||{}).map(([j,S])=>[j,S?Number(S):0])));const u={...b,role:k};try{const j=await ae(`${D}/user/create-user`,u,C);console.log(j),window.location.reload(),setTimeout(()=>{I(),U(K())},2e3)}catch(j){G.error(((g=(m=j.response)==null?void 0:m.data)==null?void 0:g.message)||"An error occurred while creating the client.")}finally{p(!1)}},I=()=>{z(M),f({}),x(null),P(""),N()};return console.log(r),e.jsxs("div",{className:"bg-white shadow-lg flex flex-col h-full",children:[e.jsxs("h2",{className:"flex text-white font-custom text-[15px] font-semibold mb-4 py-2 px-2 bg-gradient-blue",children:["Add User",e.jsx(W,{onClick:N,className:"cursor-pointer text-white text-2xl ml-auto"})]}),e.jsxs("form",{autoComplete:"off",onSubmit:V,className:"gap-2.5 md:px-6 px-4 flex flex-col h-full overflow-y-auto",children:[e.jsxs("div",{className:"w-full flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Username",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"username",value:r.username,autoComplete:"username",placeholder:"Username...",onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),r.username.length>0&&r.username.length<4&&e.jsx("div",{className:"text-red-500 ml-1 text-sm ml-[33%]",children:"Username must be at least 4 characters long."}),d.username&&e.jsx("div",{className:"text-red-500 ml-1 text-sm ml-[33%]",children:d.username}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Name"}),e.jsx("input",{type:"text",name:"name",autoComplete:"off",value:r.name,placeholder:"Name...",onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Commission(%)",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"commission",value:r.commission,placeholder:"Commission..",onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),d.commission&&e.jsx("div",{className:"text-red-500 ml-1",children:d.commission}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Opening Balance",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"openingBalance",placeholder:"OpeningBalance..",value:r.openingBalance,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),d.openingBalance&&e.jsx("div",{className:"text-red-500 ml-1",children:d.openingBalance}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Credit Reference",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"creditReference",placeholder:"CreditReference..",value:r.creditReference,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),d.creditReference&&e.jsx("div",{className:"text-red-500 ml-1",children:d.creditReference}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Mobile Number",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"mobileNumber",value:r.mobileNumber,placeholder:"Mobile Number..",onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),d.mobileNumber&&e.jsx("div",{className:"text-red-500 ml-1",children:d.mobileNumber}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Exposure Limit",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",name:"exposureLimit",value:r.exposureLimit,placeholder:"ExposureLimit..",onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0})]}),d.exposureLimit&&e.jsx("div",{className:"text-red-500 ml-1",children:d.exposureLimit}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Password",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative w-full md:w-2/3",children:[e.jsx("input",{type:y?"text":"password",name:"password",value:r.password,placeholder:"Password..",onChange:h,className:"w-full h-8 p-2 border border-lightGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0,autoComplete:"new-password"}),e.jsx("span",{onClick:()=>$(!y),className:"absolute right-2 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500",children:y?e.jsx(B,{size:20}):e.jsx(A,{size:20})})]})]}),d.password&&e.jsx("div",{className:"text-red-500 ml-1",children:d.password}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Confirm Password",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative w-full md:w-2/3",children:[e.jsx("input",{type:c?"text":"password",name:"confirmPassword",value:r.confirmPassword,placeholder:"ConfirmPassword..",onChange:h,className:"w-full h-8 p-2 border border-lightGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0}),d.confirmPassword&&e.jsx("div",{className:"text-red-500 ml-1",children:d.confirmPassword}),e.jsx("span",{onClick:()=>Z(!c),className:"absolute right-2 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500",children:c?e.jsx(B,{size:20}):e.jsx(A,{size:20})})]})]}),d.confirmPassword&&e.jsx("div",{className:"text-red-500 ml-1",children:d.confirmPassword}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Rolling Commission"}),e.jsxs("div",{className:`relative inline-flex items-center rounded-[4px] h-7 w-14 p-[2px] border border-whiteGray cursor-pointer transition-colors ${r.rollingCommissionChecked?"bg-gradient-seablue":"bg-white"}`,onClick:()=>h({target:{name:"rollingCommissionChecked",checked:!r.rollingCommissionChecked}}),children:[e.jsx("span",{className:`absolute right-2 text-sm font-bold ${r.rollingCommissionChecked?"text-transparent":"text-whiteGray"}`,children:"✗"}),e.jsx("span",{className:`absolute left-2 text-sm font-bold ${r.rollingCommissionChecked?"text-white":"text-transparent"}`,children:"✓"}),e.jsx("span",{className:`inline-block size-[21px] border rounded-[2px] border-whiteGray bg-white transform transition-transform ${r.rollingCommissionChecked?"translate-x-7":"translate-x-[1.5px]"}`})]})]}),r.rollingCommissionChecked&&e.jsxs("div",{className:"flex flex-col gap-2.5",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Fancy"}),e.jsx("input",{type:"text",name:"rollingCommission.fancy",value:r.rollingCommission.fancy||0,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Matka"}),e.jsx("input",{type:"text",name:"rollingCommission.matka",value:r.rollingCommission.matka||0,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Casino"}),e.jsx("input",{type:"text",name:"rollingCommission.casino",value:r.rollingCommission.casino||0,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Binary"}),e.jsx("input",{type:"text",name:"rollingCommission.binary",value:r.rollingCommission.binary||0,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:"Sportbook"}),e.jsx("input",{type:"text",name:"rollingCommission.sportbook",value:r.rollingCommission.sportbook||0,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[e.jsx("label",{className:"w-full md:w-1/3 capitalize text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1 ",children:"Bookmaker"}),e.jsx("input",{type:"text",name:"rollingCommission.bookmaker",value:r.rollingCommission.bookmaker||0,onChange:h,className:"w-full md:w-2/3 h-8 p-2 border border-whiteGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center",children:[e.jsxs("label",{className:"w-full md:w-1/3 text-left md:text-left font-custom text-[13px] font-semibold text-[#333] md:mb-0 mb-1",children:["Master Password",e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsxs("div",{className:"relative w-full md:w-2/3",children:[e.jsx("input",{type:O?"text":"password",name:"masterPassword",value:r.masterPassword,placeholder:"MasterPassword..",onChange:h,className:"w-full h-8 p-2 border border-lightGray rounded focus:outline-none focus:ring-1 focus:ring-gray-700 text-[13px]",required:!0}),e.jsx("span",{onClick:()=>E(!O),className:"absolute right-2 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500",children:O?e.jsx(B,{size:20}):e.jsx(A,{size:20})})]})]}),d.masterPassword&&e.jsx("div",{className:"text-red-500 ml-1",children:d.masterPassword}),e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{type:"submit",disabled:!L||t,className:`px-7 py-2 text-white rounded mb-2 ${L?"bg-gradient-seablue hover:bg-gradient-seablue":"bg-gray-400 cursor-not-allowed"} ${t||!L?"opacity-50 cursor-not-allowed":""}`,children:t?"Submitting...":"Create"})})]}),e.jsx(H,{autoClose:2e3,draggable:!0})]})},me=()=>{var q;const[N,t]=a.useState(!1),p=re(),l=a.useRef(null),x=JSON.parse(localStorage.getItem("userData")),v=(q=x==null?void 0:x.data)==null?void 0:q.role_name,P=()=>t(!0),C=()=>t(!1);a.useEffect(()=>{N?document.body.classList.add("overflow-hidden"):document.body.classList.remove("overflow-hidden");const y=$=>{l.current&&!l.current.contains($.target)&&C()};return document.addEventListener("mousedown",y),()=>{document.removeEventListener("mousedown",y)}},[N]);const R=p.pathname==="/master-downline-list"?"Add Master":"Add User",k=p.pathname==="/master-downline-list"?e.jsx(oe,{closeModal:C}):e.jsx(ne,{closeModal:C});return e.jsxs("div",{className:"flex justify-end items-center gap-2 md:mb-6 mb-4",children:[(v==="white-level"||v==="master"||v==="super-admin"||v==="sub-admin"||v==="super")&&p.pathname==="/master-downline-list"&&e.jsxs("button",{onClick:P,className:"px-5 py-[5px] bg-[#fffefe] text-lightblack rounded border border-gray-400/70 flex items-center gap-2 hover:bg-gray-200 font-bold font-custom text-[12px]",children:[e.jsx(_,{className:"text-[16px]"}),R]}),p.pathname!=="/master-downline-list"&&e.jsxs("button",{onClick:P,className:"px-5 py-[5px] bg-[#fffefe] text-lightblack rounded border border-gray-400/70 flex items-center gap-2 hover:bg-gray-200 font-bold font-custom text-[12px]",children:[e.jsx(_,{className:"text-[16px]"}),R]}),e.jsx("button",{className:"px-1.5 py-[5px] bg-[#fffefe] text-lightblack rounded border  border-gray-400/70 flex items-center gap-2 hover:bg-gray-200",children:e.jsx(le,{})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex flex-col items-center justify-center z-50 sm:px-0 px-2",children:e.jsx("div",{ref:l,className:"bg-white rounded-lg shadow-lg max-h-[95vh] overflow-hidden w-full max-w-lg",children:k})})]})};export{me as default};
